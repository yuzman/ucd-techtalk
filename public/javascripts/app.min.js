var UCD;
(function (UCD) {
    var Controllers;
    (function (Controllers) {
        var IndexController = (function () {
            /** Constructor */
            function IndexController($scope, socket) {
                this.$scope = $scope;
                this.socket = socket;
                /** Messages */
                this.messages = [];
                var ref = this;
                socket.on('server_message', function (data) {
                    ref.messages.push(data.text);
                    ref.$scope.$apply();
                });
                var cks = document.cookie.split(';');
                for (var i in cks) {
                    if (cks[i].split('signin_i=').length == 2) {
                        this.username = cks[i].split('signin_i=')[1];
                    }
                }
            }
            /** Send messages */
            IndexController.prototype.sendMessage = function () {
                if (this.userMessage && this.userMessage.length > 0) {
                    this.messages.push(this.userMessage);
                    this.socket.emit('client_message', { text: this.userMessage });
                    this.userMessage = '';
                }
            };
            /** Dependency injection */
            IndexController.$inject = ['$scope', 'socket'];
            return IndexController;
        }());
        Controllers.IndexController = IndexController;
        angular.module('UCD.Controllers', []);
        angular.module('UCD.Controllers').controller('IndexController', IndexController);
    })(Controllers = UCD.Controllers || (UCD.Controllers = {}));
})(UCD || (UCD = {}));
/// <reference path="index_controller.ts"/>
var UCD;
(function (UCD) {
    angular.module('UCD', ['ngRoute',
        'ui.bootstrap',
        'UCD.Controllers']).config(['$routeProvider', '$locationProvider',
        function ($routeProvider, $locationProvider) {
            $routeProvider.when('/', {
                templateUrl: 'views/index.html',
                controller: UCD.Controllers.IndexController,
                controllerAs: 'vm'
            })
                .otherwise({
                redirectTo: '/'
            });
        }]).run(null);
    angular.module('UCD').constant('socket', io());
})(UCD || (UCD = {}));
